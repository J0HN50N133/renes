// Generated by ReScript, PLEASE EDIT WITH CARE
'use strict';

var Caml_array = require("rescript/lib/js/caml_array.js");

function $$new(param) {
  return {
          register_a: 0,
          status: 0,
          pc: 0
        };
}

function interpret(cpu, program) {
  cpu.register_a = 0;
  cpu.status = 0;
  cpu.pc = 0;
  var $$break = false;
  while(!$$break) {
    var op = Caml_array.get(program, cpu.pc);
    cpu.pc = cpu.pc + 1 | 0;
    if (op !== 0) {
      if (op === 169) {
        var param = Caml_array.get(program, cpu.pc);
        cpu.pc = cpu.pc + 1 | 0;
        cpu.register_a = param;
        cpu.status = cpu.register_a === 0 ? cpu.status | 2 : cpu.status & 253;
        cpu.status = (cpu.register_a & 128) !== 0 ? cpu.status | 128 : cpu.status & 127;
      }
      
    } else {
      $$break = true;
    }
  };
  
}

exports.$$new = $$new;
exports.interpret = interpret;
/* No side effect */
